{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import { markdownRenderer, CodeMirror } from 'inkdrop'\nimport { lazy } from 'react'\n\nconst MATH_MODE_INFO = {\n  name: 'math',\n  mime: 'text/x-latex',\n  mode: 'stex',\n  ext: [],\n  alias: ['inline_math']\n}\n\nconst ReactMath = lazy(() => import('./react-math'))\n\nmodule.exports = {\n  activate() {\n    if (markdownRenderer) {\n      markdownRenderer.remarkCodeComponents.math = ReactMath\n      markdownRenderer.remarkCodeComponents.inline_math = ReactMath\n    }\n    if (CodeMirror) {\n      CodeMirror.modeInfo.push(MATH_MODE_INFO)\n    }\n  },\n\n  deactivate() {\n    if (markdownRenderer) {\n      markdownRenderer.remarkPlugins = markdownRenderer.remarkPlugins.filter(\n        plugin => remarkMath !== plugin\n      )\n      markdownRenderer.remarkCodeComponents.math = null\n      markdownRenderer.remarkCodeComponents.inline_math = null\n    }\n    if (CodeMirror) {\n      const { modeInfo } = CodeMirror\n      const i = modeInfo.indexOf(MATH_MODE_INFO)\n      if (i >= 0) modeInfo.splice(i, 1)\n    }\n  }\n}\n"],"names":["MATH_MODE_INFO","name","mime","mode","ext","alias","ReactMath","lazy","module","exports","activate","markdownRenderer","remarkCodeComponents","math","inline_math","CodeMirror","modeInfo","push","deactivate","remarkPlugins","filter","plugin","remarkMath","i","indexOf","splice"],"mappings":";;;;;AAGA,MAAMA,cAAc,GAAG;AACrBC,EAAAA,IAAI,EAAE,MAAM;AACZC,EAAAA,IAAI,EAAE,cAAc;AACpBC,EAAAA,IAAI,EAAE,MAAM;AACZC,EAAAA,GAAG,EAAE,EAAE;EACPC,KAAK,EAAE,CAAC,aAAa;AACvB,CAAC;AAED,MAAMC,SAAS,gBAAGC,UAAI,CAAC,MAAM,oDAAO,0BAAc,KAAC,CAAC;AAEpDC,MAAM,CAACC,OAAO,GAAG;AACfC,EAAAA,QAAQA,GAAG;AACT,IAAA,IAAIC,wBAAgB,EAAE;AACpBA,MAAAA,wBAAgB,CAACC,oBAAoB,CAACC,IAAI,GAAGP,SAAS;AACtDK,MAAAA,wBAAgB,CAACC,oBAAoB,CAACE,WAAW,GAAGR,SAAS;AAC/D;AACA,IAAA,IAAIS,kBAAU,EAAE;AACdA,MAAAA,kBAAU,CAACC,QAAQ,CAACC,IAAI,CAACjB,cAAc,CAAC;AAC1C;GACD;AAEDkB,EAAAA,UAAUA,GAAG;AACX,IAAA,IAAIP,wBAAgB,EAAE;AACpBA,MAAAA,wBAAgB,CAACQ,aAAa,GAAGR,wBAAgB,CAACQ,aAAa,CAACC,MAAM,CACpEC,MAAM,IAAIC,UAAU,KAAKD,MAC3B,CAAC;AACDV,MAAAA,wBAAgB,CAACC,oBAAoB,CAACC,IAAI,GAAG,IAAI;AACjDF,MAAAA,wBAAgB,CAACC,oBAAoB,CAACE,WAAW,GAAG,IAAI;AAC1D;AACA,IAAA,IAAIC,kBAAU,EAAE;MACd,MAAM;AAAEC,QAAAA;AAAS,OAAC,GAAGD,kBAAU;AAC/B,MAAA,MAAMQ,CAAC,GAAGP,QAAQ,CAACQ,OAAO,CAACxB,cAAc,CAAC;MAC1C,IAAIuB,CAAC,IAAI,CAAC,EAAEP,QAAQ,CAACS,MAAM,CAACF,CAAC,EAAE,CAAC,CAAC;AACnC;AACF;AACF,CAAC;;"}