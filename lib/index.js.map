{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import { markdownRenderer, CodeMirror } from 'inkdrop'\nimport { lazy } from 'react'\n\nconsole.log('module.paths:', module.paths)\n\nconst MATH_MODE_INFO = {\n  name: 'math',\n  mime: 'text/x-latex',\n  mode: 'stex',\n  ext: [],\n  alias: ['inline_math']\n}\n\nconst ReactMath = lazy(() => import('./react-math'))\n\nmodule.exports = {\n  activate() {\n    if (markdownRenderer) {\n      markdownRenderer.remarkCodeComponents.math = ReactMath\n      markdownRenderer.remarkCodeComponents.inline_math = ReactMath\n    }\n    if (CodeMirror) {\n      CodeMirror.modeInfo.push(MATH_MODE_INFO)\n    }\n  },\n\n  deactivate() {\n    if (markdownRenderer) {\n      markdownRenderer.remarkPlugins = markdownRenderer.remarkPlugins.filter(\n        plugin => remarkMath !== plugin\n      )\n      markdownRenderer.remarkCodeComponents.math = null\n      markdownRenderer.remarkCodeComponents.inline_math = null\n    }\n    if (CodeMirror) {\n      const { modeInfo } = CodeMirror\n      const i = modeInfo.indexOf(MATH_MODE_INFO)\n      if (i >= 0) modeInfo.splice(i, 1)\n    }\n  }\n}\n"],"names":["console","log","module","paths","MATH_MODE_INFO","name","mime","mode","ext","alias","ReactMath","lazy","exports","activate","markdownRenderer","remarkCodeComponents","math","inline_math","CodeMirror","modeInfo","push","deactivate","remarkPlugins","filter","plugin","remarkMath","i","indexOf","splice"],"mappings":";;;;;AAGAA,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEC,MAAM,CAACC,KAAK,CAAC,CAAA;AAE1C,MAAMC,cAAc,GAAG;AACrBC,EAAAA,IAAI,EAAE,MAAM;AACZC,EAAAA,IAAI,EAAE,cAAc;AACpBC,EAAAA,IAAI,EAAE,MAAM;AACZC,EAAAA,GAAG,EAAE,EAAE;EACPC,KAAK,EAAE,CAAC,aAAa,CAAA;AACvB,CAAC,CAAA;AAED,MAAMC,SAAS,gBAAGC,UAAI,CAAC,MAAM,oDAAO,0BAAc,KAAC,CAAC,CAAA;AAEpDT,MAAM,CAACU,OAAO,GAAG;AACfC,EAAAA,QAAQA,GAAG;AACT,IAAA,IAAIC,wBAAgB,EAAE;AACpBA,MAAAA,wBAAgB,CAACC,oBAAoB,CAACC,IAAI,GAAGN,SAAS,CAAA;AACtDI,MAAAA,wBAAgB,CAACC,oBAAoB,CAACE,WAAW,GAAGP,SAAS,CAAA;AAC/D,KAAA;AACA,IAAA,IAAIQ,kBAAU,EAAE;AACdA,MAAAA,kBAAU,CAACC,QAAQ,CAACC,IAAI,CAAChB,cAAc,CAAC,CAAA;AAC1C,KAAA;GACD;AAEDiB,EAAAA,UAAUA,GAAG;AACX,IAAA,IAAIP,wBAAgB,EAAE;AACpBA,MAAAA,wBAAgB,CAACQ,aAAa,GAAGR,wBAAgB,CAACQ,aAAa,CAACC,MAAM,CACpEC,MAAM,IAAIC,UAAU,KAAKD,MAC3B,CAAC,CAAA;AACDV,MAAAA,wBAAgB,CAACC,oBAAoB,CAACC,IAAI,GAAG,IAAI,CAAA;AACjDF,MAAAA,wBAAgB,CAACC,oBAAoB,CAACE,WAAW,GAAG,IAAI,CAAA;AAC1D,KAAA;AACA,IAAA,IAAIC,kBAAU,EAAE;MACd,MAAM;AAAEC,QAAAA,QAAAA;AAAS,OAAC,GAAGD,kBAAU,CAAA;AAC/B,MAAA,MAAMQ,CAAC,GAAGP,QAAQ,CAACQ,OAAO,CAACvB,cAAc,CAAC,CAAA;MAC1C,IAAIsB,CAAC,IAAI,CAAC,EAAEP,QAAQ,CAACS,MAAM,CAACF,CAAC,EAAE,CAAC,CAAC,CAAA;AACnC,KAAA;AACF,GAAA;AACF,CAAC;;"}